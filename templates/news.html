<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trading Pro - Market News</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .navbar {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(0, 245, 255, 0.1);
            color: #00f5ff;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .market-status {
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .market-closed {
            background: linear-gradient(45deg, #ff4757, #ff3838);
        }

        .market-open {
            background: linear-gradient(45deg, #2ed573, #1dd1a1);
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00f5ff, #0066ff);
            color: white;
        }

        .loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #00f5ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 0.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .main-content {
            margin-top: 80px;
            padding: 2rem;
            min-height: calc(100vh - 80px);
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: #888;
            font-size: 1.1rem;
        }

        .news-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: linear-gradient(45deg, #00f5ff, #0066ff);
            border-color: #00f5ff;
        }

        .news-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .news-main {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .featured-news {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .featured-news:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 245, 255, 0.2);
        }

        .news-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #00f5ff, #ff00ff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            opacity: 0.3;
        }

        .news-content {
            padding: 2rem;
        }

        .news-category {
            display: inline-block;
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .news-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .news-excerpt {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #888;
            font-size: 0.9rem;
        }

        .news-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .news-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .news-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }

        .news-item .news-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .news-item .news-excerpt {
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .trending-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .trending-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .trending-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .trending-number {
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .market-movers {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
        }

        .mover-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mover-item:hover {
            background: rgba(0, 245, 255, 0.05);
        }

        .positive { color: #2ed573; }
        .negative { color: #ff4757; }

        .economic-calendar {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
        }

        .calendar-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .event-time {
            color: #888;
            font-size: 0.8rem;
        }

        .event-impact {
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .high-impact {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
        }

        .medium-impact {
            background: rgba(255, 165, 2, 0.2);
            color: #ffa502;
        }

        .low-impact {
            background: rgba(46, 213, 115, 0.2);
            color: #2ed573;
        }

        @media (max-width: 1024px) {
            .news-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .news-filters {
                justify-content: center;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">AI TRADING PRO</div>
        <ul class="nav-links">
            <li><a href="index.html" class="active">Dashboard</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
            <li><a href="trading.html">Trading</a></li>
            <li><a href="analytics.html">Analytics</a></li>
            <li><a href="news.html">News</a></li>
            <li><a href="rl_training.html">Train</a></li>
            <li><a href="settings.html">Settings</a></li>
            
        </ul>
        <div class="user-info">
            <span class="market-status market-closed">Market CLOSED</span>
            <span>Welcome, Demo User</span>
            <button class="btn btn-primary" onclick="logout()">LOGOUT</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Market News & Analysis <span class="loading" id="mainLoader"></span></h1>
            <p class="page-subtitle">Stay informed with the latest financial news and market insights</p>
        </div>

        <!-- News Filters -->
        <div class="news-filters">
            <button class="filter-btn active" onclick="filterNews('all')">All News</button>
            <button class="filter-btn" onclick="filterNews('stocks')">Stocks</button>
            <button class="filter-btn" onclick="filterNews('crypto')">Crypto</button>
            <button class="filter-btn" onclick="filterNews('economy')">Economy</button>
            <button class="filter-btn" onclick="filterNews('earnings')">Earnings</button>
            <button class="filter-btn" onclick="filterNews('fed')">Federal Reserve</button>
        </div>

        <!-- News Grid -->
        <div class="news-grid">
            <!-- Main News Section -->
            <div class="news-main">
                <!-- Featured News -->
                <article class="featured-news">
                    <div class="news-image">ðŸ“ˆ</div>
                    <div class="news-content">
                        <span class="news-category">BREAKING</span>
                        <h2 class="news-title">Federal Reserve Announces Interest Rate Decision: Markets React</h2>
                        <p class="news-excerpt">
                            The Federal Reserve announced its latest interest rate decision today, maintaining rates at current levels while signaling potential changes ahead. Market analysts are closely watching the implications for equity markets and the broader economy...
                        </p>
                        <div class="news-meta">
                            <span>Reuters â€¢ 2 hours ago</span>
                            <span>ðŸ“Š Market Impact: High</span>
                        </div>
                    </div>
                </article>

                <!-- News List -->
                <div class="news-list">
                    <article class="news-item">
                        <span class="news-category">TECHNOLOGY</span>
                        <h3 class="news-title">Tech Stocks Rally on Strong AI Earnings Reports</h3>
                        <p class="news-excerpt">Major technology companies reported better-than-expected earnings, driven by artificial intelligence and cloud computing growth...</p>
                        <div class="news-meta">
                            <span>MarketWatch â€¢ 3 hours ago</span>
                            <span class="positive">ðŸ“ˆ +2.4%</span>
                        </div>
                    </article>

                    <article class="news-item">
                        <span class="news-category">ENERGY</span>
                        <h3 class="news-title">Oil Prices Surge on Supply Chain Disruptions</h3>
                        <p class="news-excerpt">Crude oil futures jumped 3.2% following reports of supply chain disruptions in major oil-producing regions...</p>
                        <div class="news-meta">
                            <span>Bloomberg â€¢ 4 hours ago</span>
                            <span class="positive">ðŸ“ˆ +3.2%</span>
                        </div>
                    </article>

                    <article class="news-item">
                        <span class="news-category">EARNINGS</span>
                        <h3 class="news-title">Apple Reports Record Q3 Revenue Despite Economic Headwinds</h3>
                        <p class="news-excerpt">Apple Inc. exceeded analyst expectations with record quarterly revenue, driven by strong iPhone and services performance...</p>
                        <div class="news-meta">
                            <span>CNBC â€¢ 5 hours ago</span>
                            <span class="positive">ðŸ“ˆ +1.8%</span>
                        </div>
                    </article>

                    <article class="news-item">
                        <span class="news-category">CRYPTO</span>
                        <h3 class="news-title">Bitcoin Reaches New Monthly High Amid Institutional Interest</h3>
                        <p class="news-excerpt">Bitcoin climbed to its highest level this month as institutional investors show renewed interest in cryptocurrency investments...</p>
                        <div class="news-meta">
                            <span>CoinDesk â€¢ 6 hours ago</span>
                            <span class="positive">ðŸ“ˆ +4.7%</span>
                        </div>
                    </article>

                    <article class="news-item">
                        <span class="news-category">ECONOMY</span>
                        <h3 class="news-title">Consumer Confidence Index Shows Unexpected Improvement</h3>
                        <p class="news-excerpt">The latest Consumer Confidence Index reading came in above expectations, suggesting resilient consumer sentiment...</p>
                        <div class="news-meta">
                            <span>Financial Times â€¢ 7 hours ago</span>
                            <span class="positive">ðŸ“ˆ +0.8%</span>
                        </div>
                    </article>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Trending Stories -->
                <div class="trending-section">
                    <h3 class="section-title">ðŸ”¥ Trending Now</h3>
                    <div class="trending-item">
                        <div class="trending-number">1</div>
                        <div>
                            <div class="news-title">Fed Rate Decision</div>
                            <div class="event-time">2 hours ago</div>
                        </div>
                    </div>
                    <div class="trending-item">
                        <div class="trending-number">2</div>
                        <div>
                            <div class="news-title">AI Stocks Surge</div>
                            <div class="event-time">3 hours ago</div>
                        </div>
                    </div>
                    <div class="trending-item">
                        <div class="trending-number">3</div>
                        <div>
                            <div class="news-title">Oil Price Rally</div>
                            <div class="event-time">4 hours ago</div>
                        </div>
                    </div>
                    <div class="trending-item">
                        <div class="trending-number">4</div>
                        <div>
                            <div class="news-title">Tesla Earnings</div>
                            <div class="event-time">5 hours ago</div>
                        </div>
                    </div>
                    <div class="trending-item">
                        <div class="trending-number">5</div>
                        <div>
                            <div class="news-title">Bitcoin Rally</div>
                            <div class="event-time">6 hours ago</div>
                        </div>
                    </div>
                </div>

                <!-- Market Movers -->
                <div class="market-movers">
                    <h3 class="section-title">ðŸ“Š Market Movers (Live)</h3>
                    <div id="market-movers-container">
                        <div style="text-align: center; padding: 1rem; color: #888;">Loading...</div>
                    </div>
                </div>

                <!-- Economic Calendar -->
                <div class="economic-calendar">
                    <h3 class="section-title">ðŸ“… Economic Calendar</h3>
                    <div class="calendar-item">
                        <div>
                            <strong>Fed Interest Rate Decision</strong>
                            <div class="event-time">Today, 2:00 PM EST</div>
                        </div>
                        <span class="event-impact high-impact">HIGH</span>
                    </div>
                    <div class="calendar-item">
                        <div>
                            <strong>Employment Report</strong>
                            <div class="event-time">Tomorrow, 8:30 AM EST</div>
                        </div>
                        <span class="event-impact high-impact">HIGH</span>
                    </div>
                    <div class="calendar-item">
                        <div>
                            <strong>Consumer Price Index</strong>
                            <div class="event-time">Oct 12, 8:30 AM EST</div>
                        </div>
                        <span class="event-impact medium-impact">MED</span>
                    </div>
                    <div class="calendar-item">
                        <div>
                            <strong>GDP Growth Rate</strong>
                            <div class="event-time">Oct 15, 8:30 AM EST</div>
                        </div>
                        <span class="event-impact medium-impact">MED</span>
                    </div>
                    <div class="calendar-item">
                        <div>
                            <strong>Retail Sales</strong>
                            <div class="event-time">Oct 18, 8:30 AM EST</div>
                        </div>
                        <span class="event-impact low-impact">LOW</span>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <script>
        // API Keys
        const FINNHUB_API_KEY = 'd3f9q79r01qolknc9vhgd3f9q79r01qolknc9vi0';
        const NEWS_API_KEY = '1acb4f9a6da041d4acde2a75072f16d7';

        let currentFilter = 'all';
        let stockData = {};
        const watchlistSymbols = ['AAPL', 'TSLA', 'NVDA', 'AMZN'];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            updateMarketStatus();
            fetchMarketMovers();
            startNewsUpdates();
            document.getElementById('mainLoader').style.display = 'none';
        });

        async function fetchMarketMovers() {
            try {
                // Initialize with demo data
                stockData = {
                    'AAPL': { symbol: 'AAPL', price: 175.30, change: 2.45, percent: 1.42, company: 'Apple Inc.' },
                    'TSLA': { symbol: 'TSLA', price: 245.60, change: -3.20, percent: -1.28, company: 'Tesla Inc.' },
                    'NVDA': { symbol: 'NVDA', price: 485.20, change: 12.80, percent: 2.71, company: 'NVIDIA Corp.' },
                    'AMZN': { symbol: 'AMZN', price: 3250.80, change: 25.40, percent: 0.79, company: 'Amazon Inc.' }
                };
                displayMarketMovers();

                // Try to fetch live data
                const promises = watchlistSymbols.map(async symbol => {
                    try {
                        const response = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${FINNHUB_API_KEY}`);
                        if (!response.ok) throw new Error('API Error');
                        const data = await response.json();
                        
                        if (data.c && data.c > 0) {
                            return {
                                symbol: symbol,
                                price: data.c,
                                change: data.d || 0,
                                percent: data.dp || 0
                            };
                        }
                        return null;
                    } catch (err) {
                        return null;
                    }
                });

                const results = await Promise.all(promises);
                let liveDataCount = 0;
                
                results.forEach(data => {
                    if (data && data.symbol && stockData[data.symbol]) {
                        stockData[data.symbol] = { ...stockData[data.symbol], ...data };
                        liveDataCount++;
                    }
                });

                if (liveDataCount > 0) {
                    console.log(`Loaded live data for ${liveDataCount} stocks`);
                    displayMarketMovers();
                }
            } catch (error) {
                console.error('Error fetching market movers:', error);
            }
        }

        function displayMarketMovers() {
            const container = document.getElementById('market-movers-container');
            if (!container) return;

            const companyNames = {
                'AAPL': 'Apple Inc.',
                'TSLA': 'Tesla Inc.',
                'NVDA': 'NVIDIA Corp.',
                'AMZN': 'Amazon Inc.'
            };

            container.innerHTML = Object.values(stockData).map(stock => {
                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                return `
                    <div class="mover-item" onclick="viewStock('${stock.symbol}')">
                        <div>
                            <strong>${stock.symbol}</strong><br>
                            <small>${companyNames[stock.symbol] || stock.symbol}</small>
                        </div>
                        <div style="text-align: right;">
                            <div class="${changeClass}">$${stock.price.toFixed(2)}</div>
                            <small class="${changeClass}">${changeSymbol}${Math.abs(stock.change).toFixed(2)} (${changeSymbol}${stock.percent.toFixed(2)}%)</small>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function viewStock(symbol) {
            window.location.href = `trading.html?symbol=${symbol}`;
        }

        function filterNews(category) {
            currentFilter = category;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            console.log(`Filtering news by: ${category}`);
            showNotification(`Loading ${category} news...`, 'info');
            
            setTimeout(() => {
                showNotification(`${category.charAt(0).toUpperCase() + category.slice(1)} news loaded`, 'success');
            }, 1000);
        }

        function updateMarketStatus() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentDay = now.getDay();
            
            const isWeekday = currentDay >= 1 && currentDay <= 5;
            const isMarketHours = currentHour >= 9 && currentHour < 16;
            const marketOpen = isWeekday && isMarketHours;
            
            const statusElement = document.querySelector('.market-status');
            
            if (marketOpen) {
                statusElement.textContent = 'Market OPEN';
                statusElement.className = 'market-status market-open';
            } else {
                if (!isWeekday) {
                    statusElement.textContent = 'Market CLOSED (Weekend)';
                } else if (currentHour < 9) {
                    statusElement.textContent = 'Market CLOSED (Pre-Market)';
                } else {
                    statusElement.textContent = 'Market CLOSED (After Hours)';
                }
                statusElement.className = 'market-status market-closed';
            }
        }

        function startNewsUpdates() {
            setInterval(() => {
                updateMarketMoversLive();
                updateTrendingStories();
            }, 30000);

            // Refresh market movers every 30 seconds
            setInterval(fetchMarketMovers, 30000);
        }

        function updateMarketMoversLive() {
            Object.keys(stockData).forEach(symbol => {
                const stock = stockData[symbol];
                const variation = (Math.random() - 0.5) * 1;
                stock.price += variation * 0.5;
                stock.change += variation * 0.5;
                stock.percent = (stock.change / (stock.price - stock.change)) * 100;
                
                if (stock.price < 1) stock.price = Math.abs(stock.price) + 1;
            });
            
            displayMarketMovers();
        }

        function updateTrendingStories() {
            const trendingItems = document.querySelectorAll('.trending-item');
            if (Math.random() > 0.7) {
                const container = trendingItems[0].parentNode;
                const items = Array.from(trendingItems);
                
                const lastItem = items[items.length - 1];
                container.insertBefore(lastItem, items[0]);
                
                container.querySelectorAll('.trending-number').forEach((num, index) => {
                    num.textContent = index + 1;
                });
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'linear-gradient(45deg, #2ed573, #1dd1a1)' : 
                            type === 'warning' ? 'linear-gradient(45deg, #ff4757, #ff3838)' : 
                            'linear-gradient(45deg, #00f5ff, #0066ff)';
            
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 1rem 2rem;
                border-radius: 12px;
                z-index: 3000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
                font-weight: 600;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>