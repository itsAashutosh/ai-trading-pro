<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trading Pro - Analytics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .navbar {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(0, 245, 255, 0.1);
            color: #00f5ff;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .market-status {
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .market-closed {
            background: linear-gradient(45deg, #ff4757, #ff3838);
        }

        .market-open {
            background: linear-gradient(45deg, #2ed573, #1dd1a1);
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00f5ff, #0066ff);
            color: white;
        }

        .loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #00f5ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 0.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .main-content {
            margin-top: 80px;
            padding: 2rem;
            min-height: calc(100vh - 80px);
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #00f5ff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: #888;
            font-size: 1.1rem;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            height: 400px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #00f5ff;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 245, 255, 0.2);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .metric-label {
            color: #888;
            font-size: 0.9rem;
        }

        .positive { color: #2ed573; }
        .negative { color: #ff4757; }
        .neutral { color: #ffa502; }

        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">AI TRADING PRO</div>
        <ul class="nav-links">
            <li><a href="index.html" class="active">Dashboard</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
            <li><a href="trading.html">Trading</a></li>
            <li><a href="analytics.html">Analytics</a></li>
            <li><a href="news.html">News</a></li>
            <li><a href="rl_training.html">Train</a></li>
            <li><a href="settings.html">Settings</a></li>
        </ul>
        <div class="user-info">
            <span class="market-status market-closed" id="market-status">Market CLOSED</span>
            <span>Welcome, Demo User</span>
            <button class="btn btn-primary" onclick="logout()">LOGOUT</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Performance Analytics <span class="loading" id="mainLoader"></span></h1>
            <p class="page-subtitle">Advanced analytics and performance metrics for your portfolio</p>
        </div>

        <!-- Key Metrics -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Sharpe Ratio</div>
                <div class="metric-value positive" id="sharpe-ratio">1.34</div>
                <small>Risk-adjusted return</small>
            </div>
            <div class="metric-card">
                <div class="metric-label">Beta</div>
                <div class="metric-value neutral" id="beta">0.87</div>
                <small>Market correlation</small>
            </div>
            <div class="metric-card">
                <div class="metric-label">Alpha</div>
                <div class="metric-value positive" id="alpha">+2.8%</div>
                <small>Excess return</small>
            </div>
            <div class="metric-card">
                <div class="metric-label">Volatility</div>
                <div class="metric-value neutral" id="volatility">18.5%</div>
                <small>Annual std deviation</small>
            </div>
            <div class="metric-card">
                <div class="metric-label">Max Drawdown</div>
                <div class="metric-value negative" id="max-drawdown">-8.2%</div>
                <small>Largest loss</small>
            </div>
            <div class="metric-card">
                <div class="metric-label">Win Rate</div>
                <div class="metric-value positive" id="win-rate">68%</div>
                <small>Profitable trades</small>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="chart-card">
                <h3 class="chart-title">Risk Analysis</h3>
                <canvas id="riskChart"></canvas>
            </div>
            <div class="chart-card">
                <h3 class="chart-title">Returns Distribution</h3>
                <canvas id="returnsChart"></canvas>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card">
                <h3 class="chart-title">Volatility Over Time</h3>
                <canvas id="volatilityChart"></canvas>
            </div>
            <div class="chart-card">
                <h3 class="chart-title">Correlation Matrix</h3>
                <canvas id="correlationChart"></canvas>
            </div>
        </div>
    </main>

    <script>
        // API Keys
        const FINNHUB_API_KEY = 'd3f9q79r01qolknc9vhgd3f9q79r01qolknc9vi0';
        const NEWS_API_KEY = '1acb4f9a6da041d4acde2a75072f16d7';

        let charts = {};

        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            updateMarketStatus();
            document.getElementById('mainLoader').style.display = 'none';
            
            // Simulate metric updates every 60 seconds
            setInterval(updateMetricsSimulation, 60000);
        });

        function updateMetricsSimulation() {
            // Simulate slight variations in metrics
            const sharpe = (1.34 + (Math.random() - 0.5) * 0.1).toFixed(2);
            const beta = (0.87 + (Math.random() - 0.5) * 0.05).toFixed(2);
            const alpha = (2.8 + (Math.random() - 0.5) * 0.5).toFixed(1);
            const volatility = (18.5 + (Math.random() - 0.5) * 2).toFixed(1);
            
            document.getElementById('sharpe-ratio').textContent = sharpe;
            document.getElementById('beta').textContent = beta;
            document.getElementById('alpha').textContent = '+' + alpha + '%';
            document.getElementById('volatility').textContent = volatility + '%';
        }

        function initializeCharts() {
            // Risk Analysis Chart
            const riskCtx = document.getElementById('riskChart');
            if (riskCtx) {
                charts.risk = new Chart(riskCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Volatility', 'Beta', 'Sharpe Ratio', 'Max Drawdown', 'Correlation', 'VaR'],
                        datasets: [{
                            label: 'Portfolio Risk Metrics',
                            data: [65, 80, 75, 45, 60, 70],
                            backgroundColor: 'rgba(0, 245, 255, 0.2)',
                            borderColor: '#00f5ff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            r: {
                                ticks: { color: '#888888' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }

            // Returns Distribution
            const returnsCtx = document.getElementById('returnsChart');
            if (returnsCtx) {
                charts.returns = new Chart(returnsCtx, {
                    type: 'bar',
                    data: {
                        labels: ['-10%', '-5%', '0%', '+5%', '+10%', '+15%', '+20%'],
                        datasets: [{
                            label: 'Frequency',
                            data: [2, 5, 12, 18, 15, 8, 3],
                            backgroundColor: 'rgba(0, 245, 255, 0.6)',
                            borderColor: '#00f5ff',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#888888' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: {
                                ticks: { color: '#888888' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }

            // Volatility Over Time
            const volatilityCtx = document.getElementById('volatilityChart');
            if (volatilityCtx) {
                charts.volatility = new Chart(volatilityCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                        datasets: [{
                            label: 'Volatility %',
                            data: [15.2, 18.4, 22.1, 19.8, 16.5, 18.9, 20.3, 17.6, 18.5],
                            borderColor: '#ff00ff',
                            backgroundColor: 'rgba(255, 0, 255, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#888888' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: {
                                ticks: { 
                                    color: '#888888',
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }

            // Correlation Matrix
            const correlationCtx = document.getElementById('correlationChart');
            if (correlationCtx) {
                charts.correlation = new Chart(correlationCtx, {
                    type: 'bar',
                    data: {
                        labels: ['AAPL-MSFT', 'AAPL-GOOGL', 'TSLA-AAPL', 'MSFT-GOOGL', 'TSLA-MSFT'],
                        datasets: [{
                            label: 'Correlation Coefficient',
                            data: [0.85, 0.72, 0.45, 0.88, 0.52],
                            backgroundColor: [
                                'rgba(0, 245, 255, 0.8)',
                                'rgba(255, 0, 255, 0.8)',
                                'rgba(255, 255, 0, 0.8)',
                                'rgba(0, 255, 0, 0.8)',
                                'rgba(255, 71, 87, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#888888' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: {
                                ticks: { color: '#888888' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                min: 0,
                                max: 1
                            }
                        }
                    }
                });
            }
        }

        function updateMarketStatus() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentDay = now.getDay();
            
            const isWeekday = currentDay >= 1 && currentDay <= 5;
            const isMarketHours = currentHour >= 9 && currentHour < 16;
            const marketOpen = isWeekday && isMarketHours;
            
            const statusElement = document.getElementById('market-status');
            
            if (marketOpen) {
                statusElement.textContent = 'Market OPEN';
                statusElement.className = 'market-status market-open';
            } else {
                if (!isWeekday) {
                    statusElement.textContent = 'Market CLOSED (Weekend)';
                } else if (currentHour < 9) {
                    statusElement.textContent = 'Market CLOSED (Pre-Market)';
                } else {
                    statusElement.textContent = 'Market CLOSED (After Hours)';
                }
                statusElement.className = 'market-status market-closed';
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>